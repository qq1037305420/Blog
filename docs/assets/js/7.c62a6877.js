(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{207:function(e,v,a){"use strict";a.r(v);var _=a(0),t=Object(_.a)({},(function(){var e=this,v=e.$createElement,a=e._self._c||v;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"webpack-学习"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-学习","aria-hidden":"true"}},[e._v("#")]),e._v(" WEBPACK 学习")]),e._v(" "),a("h2",{attrs:{id:"依赖工具webpack-cli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#依赖工具webpack-cli","aria-hidden":"true"}},[e._v("#")]),e._v(" 依赖工具webpack-cli")]),e._v(" "),a("ul",[a("li",[e._v("默认支持commonjs, es6 esmodle")]),e._v(" "),a("li",[e._v("--mode production/development")]),e._v(" "),a("li",[e._v("--env.development")]),e._v(" "),a("li",[e._v("--config path\n"),a("ul",[a("li",[e._v("ex: ./build/webpack.base.js")])])])]),e._v(" "),a("h2",{attrs:{id:"文件配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件配置","aria-hidden":"true"}},[e._v("#")]),e._v(" 文件配置")]),e._v(" "),a("ul",[a("li",[a("h3",{attrs:{id:"定义webpack-config-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义webpack-config-js","aria-hidden":"true"}},[e._v("#")]),e._v(" 定义webpack.config.js")])]),e._v(" "),a("li",[a("h3",{attrs:{id:"使用path解析绝对路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用path解析绝对路径","aria-hidden":"true"}},[e._v("#")]),e._v(" 使用path解析绝对路径")]),e._v(" "),a("ul",[a("li",[e._v("path.resolve(__dirname, path)")])])]),e._v(" "),a("li",[a("h3",{attrs:{id:"配置环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置环境变量","aria-hidden":"true"}},[e._v("#")]),e._v(" 配置环境变量")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("module.exports = (env) => {")])]),e._v(" "),a("p",[e._v("​\t"),a("code",[e._v("console.log(env)")])]),e._v(" "),a("p",[e._v("​\t"),a("code",[e._v("let isEnv = env.development")])]),e._v(" "),a("p",[a("code",[e._v("}")])])]),e._v(" "),a("li",[a("p",[e._v("新建base,dev,prod文件")]),e._v(" "),a("ul",[a("li",[e._v("引入 dev prod")]),e._v(" "),a("li",[e._v("两种引入方案\n"),a("ul",[a("li",[e._v("全部引用base")]),e._v(" "),a("li",[e._v("分别引用Dev，Prod")])])])])])])]),e._v(" "),a("li",[a("p",[e._v("使用webpack-merge合并base 和其他配置")]),e._v(" "),a("ul",[a("li",[e._v("merge(base,  dev/prod)")])])]),e._v(" "),a("li",[a("p",[e._v("webpack-dev-serve")]),e._v(" "),a("ul",[a("li",[e._v("在内存中打包，不会产生文件")]),e._v(" "),a("li",[e._v("配置devServer\n"),a("ul",[a("li",[e._v("port: 3000")]),e._v(" "),a("li",[e._v("gzip => compress: true")]),e._v(" "),a("li",[e._v("contentBase: path.resolve(__dirname, '../dist')")])])])])]),e._v(" "),a("li",[a("p",[e._v("自动生成html文件，并引入打包后的js内容")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("public 文件夹中创建index.html")])]),e._v(" "),a("li",[a("p",[e._v("html-webpack-plugin")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("webpack.base.js 中引入该plugin")])]),e._v(" "),a("li",[a("p",[e._v("template: path.resolve(Path of Index.html)")])]),e._v(" "),a("li",[a("p",[e._v("filename: index.html")])]),e._v(" "),a("li",[a("p",[e._v("minify: !isDev && {")]),e._v(" "),a("p",[e._v("​\t\tremoveAttributeQuotes: true")]),e._v(" "),a("p",[e._v("​\t\tcollapseWhitespace: true")]),e._v(" "),a("p",[e._v("}")])])])])])]),e._v(" "),a("li",[a("p",[e._v("清除输出(dist)的目录 clean-webpack-plugin")]),e._v(" "),a("ul",[a("li",[e._v("引入")])])])]),e._v(" "),a("h2",{attrs:{id:"loaders"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loaders","aria-hidden":"true"}},[e._v("#")]),e._v(" Loaders")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("解析的顺序为从右往左")]),e._v(" "),a("h3",{attrs:{id:"css-loaders"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css-loaders","aria-hidden":"true"}},[e._v("#")]),e._v(" css loaders")])]),e._v(" "),a("li",[a("p",[e._v("css-loader")]),e._v(" "),a("ul",[a("li",[e._v("解析css语法")])])]),e._v(" "),a("li",[a("p",[e._v("style-loader")]),e._v(" "),a("ul",[a("li",[e._v("讲解析的css 变成style标签插入到页面中")])])]),e._v(" "),a("li",[a("p",[a("code",[e._v("module: {")])]),e._v(" "),a("p",[e._v("​\t"),a("code",[e._v("rules: [")])]),e._v(" "),a("p",[e._v("​\t\t"),a("code",[e._v("{")])]),e._v(" "),a("p",[a("code",[e._v("test: /\\.css$/,")])]),e._v(" "),a("p",[a("code",[e._v("use: ['style-loader', 'css-loader']")])]),e._v(" "),a("p",[e._v("​\t\t"),a("code",[e._v("}")]),e._v(",")]),e._v(" "),a("p",[e._v("​\t\t"),a("code",[e._v("{")])]),e._v(" "),a("p",[a("code",[e._v("test: /\\.scss$/,")])]),e._v(" "),a("p",[a("code",[e._v("use: ['style-loader', 'css-loader', 'sass-loader']")])]),e._v(" "),a("p",[e._v("​\t\t"),a("code",[e._v("}")])]),e._v(" "),a("p",[e._v("​\t"),a("code",[e._v("]")])]),e._v(" "),a("p",[a("code",[e._v("}")])])]),e._v(" "),a("li",[a("p",[e._v("如果css引入scss")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("test: /\\.css$/,")])]),e._v(" "),a("p",[a("code",[e._v("use: ['style-loader', {")])]),e._v(" "),a("p",[a("code",[e._v("loader: 'css-loader',")])]),e._v(" "),a("p",[a("code",[e._v("options: {importLoaders: 2}")])]),e._v(" "),a("p",[a("code",[e._v("},'postcss-loader', 'sass-loader']")])])])])]),e._v(" "),a("li",[a("p",[e._v("自动添加前缀")]),e._v(" "),a("ul",[a("li",[e._v("postcss")]),e._v(" "),a("li",[e._v("autoprefixer")]),e._v(" "),a("li",[e._v("postcss.config.js\n"),a("ul",[a("li",[e._v("plugins: [require('autoprefixer')]")]),e._v(" "),a("li",[e._v("并且添加.browerslistrc")])])])])]),e._v(" "),a("li",[a("p",[e._v("mini-css-extract-plugin")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("loader配置isDev? 'style-loader': miniCssExtractPlugin")])]),e._v(" "),a("li",[a("p",[e._v("plugin并引入 !isDev && new MinicssExtractPlugin({")]),e._v(" "),a("p",[e._v("​\tfilename: 'css/mian.css'")]),e._v(" "),a("p",[e._v("})")])]),e._v(" "),a("li",[a("p",[e._v("plugins.filter(Boolean)")])]),e._v(" "),a("li",[a("p",[e._v("生产环境配置")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("安装optimize-css-assets-webpack-plugin")])]),e._v(" "),a("li",[a("p",[e._v("optimization: {")]),e._v(" "),a("p",[e._v("​\tminimizer: [")]),e._v(" "),a("p",[e._v("​\t\tnew optimize-css-assets-webpack-plugin()")]),e._v(" "),a("p",[e._v("​\t]")]),e._v(" "),a("p",[e._v("}")])])])])])]),e._v(" "),a("li",[a("p",[e._v("terser-webpack-plugin")]),e._v(" "),a("ul",[a("li",[e._v("压缩js")]),e._v(" "),a("li",[e._v("生产环境中 new 在plugin里面")])])])]),e._v(" "),a("h3",{attrs:{id:"图片loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片loader","aria-hidden":"true"}},[e._v("#")]),e._v(" 图片loader")]),e._v(" "),a("ul",[a("li",[e._v("file-loader")]),e._v(" "),a("li",[e._v("test: /.(jpe?g|png|gif)$/")]),e._v(" "),a("li",[e._v("use: {loader: 'url-loader', options: {name: 'image/[name/contentHash].[ext]', limit: 100 * 1024}}\n"),a("ul",[a("li",[e._v("小于100kb的变成base64.大于自动变file-loader")])])])]),e._v(" "),a("h3",{attrs:{id:"字体-icon-loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字体-icon-loader","aria-hidden":"true"}},[e._v("#")]),e._v(" 字体 icon loader")]),e._v(" "),a("ul",[a("li",[e._v("test: /.(woff|ttf|eot|svg)$/")]),e._v(" "),a("li",[e._v("use: 'file-loader'")])]),e._v(" "),a("h3",{attrs:{id:"jsloader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsloader","aria-hidden":"true"}},[e._v("#")]),e._v(" jsLoader")]),e._v(" "),a("ul",[a("li",[e._v("babel\n"),a("ul",[a("li",[e._v("@babel/core")]),e._v(" "),a("li",[e._v("@babel/preset-env")]),e._v(" "),a("li",[e._v("babel-loader 调用core转化时候用preset env")])])]),e._v(" "),a("li",[e._v("es6 => es5\n"),a("ul",[a("li",[e._v("test: /.js&/")]),e._v(" "),a("li",[e._v("use: 'babel-loader'")]),e._v(" "),a("li",[e._v("添加.babelrc 执行顺序为倒叙")]),e._v(" "),a("li",[e._v("presets: {\"@babel/preset-env\", {useBuiltIns: 'usage', corejs: 2}}")]),e._v(" "),a("li",[e._v("plugins: []")])])]),e._v(" "),a("li",[e._v("装饰器\n"),a("ul",[a("li",[e._v("@babel/plugin-proposal-class-properties{loose: true}")]),e._v(" "),a("li",[e._v("@babel/plugin-proposal-decorators{legacy: true}")])])]),e._v(" "),a("li",[e._v("corejs")]),e._v(" "),a("li",[e._v("@babel/plugin-transform-runtime")])]),e._v(" "),a("h3",{attrs:{id:"react"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react","aria-hidden":"true"}},[e._v("#")]),e._v(" React")]),e._v(" "),a("ul",[a("li",[e._v("@babel/present-react")]),e._v(" "),a("li",[e._v("@babel/present-typescript")]),e._v(" "),a("li")]),e._v(" "),a("h3",{attrs:{id:"vue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue","aria-hidden":"true"}},[e._v("#")]),e._v(" Vue")]),e._v(" "),a("ul",[a("li",[e._v("vue loader\n"),a("ul",[a("li",[e._v("并且引入vue loader plugin")])])]),e._v(" "),a("li",[e._v("vue templatete compiler")]),e._v(" "),a("li",[e._v("如若使用ts安装 vue property decorator\n"),a("ul",[a("li",[e._v("@babel/present-typescript, {allExtentions: true}")])])])]),e._v(" "),a("h2",{attrs:{id:"webpack-优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-优化","aria-hidden":"true"}},[e._v("#")]),e._v(" webpack 优化")]),e._v(" "),a("ul",[a("li",[e._v("动态加载\n"),a("ul",[a("li",[e._v("import().then()")]),e._v(" "),a("li",[e._v("需要引入 @babel/plugin-syntax-dynamic-import")])])]),e._v(" "),a("li",[e._v("热更新\n"),a("ul",[a("li",[e._v("devserver: {hot: true}")]),e._v(" "),a("li",[e._v("webpack.NamedModulesPlugin 热更新模块")]),e._v(" "),a("li",[e._v("webpack.HotModleReplacementPlugin 热更新插件")])])])]),e._v(" "),a("h3",{attrs:{id:"优化css"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化css","aria-hidden":"true"}},[e._v("#")]),e._v(" 优化css")]),e._v(" "),a("ul",[a("li",[e._v("插件 purgecss-webpack-plugin glob")]),e._v(" "),a("li",[e._v("glob.sync(path(任意文件夹下的任意文件), {nodir: true})")]),e._v(" "),a("li",[e._v("purgeCssWebpackPlugin\n"),a("ul",[a("li",[e._v("只能配合minicss extract plugin")]),e._v(" "),a("li",[e._v("传入paths(glob.sync(src/**/*), {nodir: true})")])])])]),e._v(" "),a("h3",{attrs:{id:"优化图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化图片","aria-hidden":"true"}},[e._v("#")]),e._v(" 优化图片")]),e._v(" "),a("ul",[a("li",[e._v("image-webpack-loader")]),e._v(" "),a("li",[e._v("减低分辨率,清晰度.")]),e._v(" "),a("li",[e._v("test: /\\png/")]),e._v(" "),a("li",[e._v("use: []")]),e._v(" "),a("li",[e._v("npm 搜索这个然后拷入配置")])]),e._v(" "),a("h3",{attrs:{id:"cdn-加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cdn-加载","aria-hidden":"true"}},[e._v("#")]),e._v(" CDN 加载")]),e._v(" "),a("p",[e._v("需要在index.html中引入")]),e._v(" "),a("pre",[a("code",[e._v("external: {\n\n'jquery': '$'\n\n}\n")])]),e._v(" "),a("p",[e._v("add asset html cdn webpack plugin")]),e._v(" "),a("pre",[a("code",[e._v("`new addcdnplugin(true, {`\n\t`jquery: 'https: //'`\n`})`\n")])]),e._v(" "),a("h3",{attrs:{id:"优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化","aria-hidden":"true"}},[e._v("#")]),e._v(" 优化")]),e._v(" "),a("p",[e._v("使用了哪些模块")]),e._v(" "),a("p",[e._v("optimization:  {usedExports: true}")]),e._v(" "),a("h3",{attrs:{id:"treeshaking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#treeshaking","aria-hidden":"true"}},[e._v("#")]),e._v(" Treeshaking")]),e._v(" "),a("p",[e._v("只支持es6语法")]),e._v(" "),a("p",[e._v("引用变量是否被删除 副作用")]),e._v(" "),a("p",[e._v("package.json")]),e._v(" "),a("p",[e._v("css 不是副作用")]),e._v(" "),a("pre",[a("code",[e._v('sideEffects: [\n\n\t"**/*.css"\n\n]\n')])]),e._v(" "),a("h4",{attrs:{id:"es6-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es6-module","aria-hidden":"true"}},[e._v("#")]),e._v(" es6 module")]),e._v(" "),a("h4",{attrs:{id:"scope-hoisting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scope-hoisting","aria-hidden":"true"}},[e._v("#")]),e._v(" Scope hoisting")]),e._v(" "),a("p",[e._v("会直接导出值")]),e._v(" "),a("p",[e._v("把里面其他代码都优化掉了")]),e._v(" "),a("h2",{attrs:{id:"dll-plugin-打包速度优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dll-plugin-打包速度优化","aria-hidden":"true"}},[e._v("#")]),e._v(" DLL Plugin 打包速度优化")]),e._v(" "),a("p",[e._v("manifest.json")]),e._v(" "),a("p",[e._v("react: '打包后的文件'")]),e._v(" "),a("p",[e._v("reactdom: '打包好的文件'")]),e._v(" "),a("p",[e._v("产生缓存文件")]),e._v(" "),a("p",[e._v("dllPlugin = require(webpacl).DllPlugin")]),e._v(" "),a("pre",[a("code",[e._v("{\n\n​\tplugins: [\n\n​\t\tnew DllPlugin({name: 'react', path: path.resolve(__dirname, \t'dll/manifest.json')})\n\n​\t]\n\n}\n")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("内部引用 dllreferenceplugin = require('weback').DllReferencePlugin")]),e._v(" "),a("ul",[a("li",[e._v("new dllRefer({")])]),e._v(" "),a("p",[e._v("manifext: path")]),e._v(" "),a("p",[e._v("})")]),e._v(" "),a("ul",[a("li",[e._v("同时需要引用")])])]),e._v(" "),a("li",[a("p",[e._v("add asset html webpack plugin")]),e._v(" "),a("ul",[a("li",[e._v("添加资源插件")]),e._v(" "),a("li",[e._v("new add({filepath: path.resolve(__dirname, '*.dll.js')})")])])])]),e._v(" "),a("h3",{attrs:{id:"打包第三方"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包第三方","aria-hidden":"true"}},[e._v("#")]),e._v(" 打包第三方")]),e._v(" "),a("p",[a("code",[e._v("entry: [react, react-dom]")])]),e._v(" "),a("p",[a("code",[e._v("output: {library: filename, libraryTarget: 'var/commonjs/commonjs2/umd/this'}")])]),e._v(" "),a("p",[e._v("node 用commonjs2")]),e._v(" "),a("p",[e._v("全局 就不配置S")]),e._v(" "),a("h3",{attrs:{id:"不引用外部库-node-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不引用外部库-node-module","aria-hidden":"true"}},[e._v("#")]),e._v(" 不引用外部库(node_module)")]),e._v(" "),a("ul",[a("li",[e._v("TODO:: 补充插件名称")])]),e._v(" "),a("h3",{attrs:{id:"动态加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#动态加载","aria-hidden":"true"}},[e._v("#")]),e._v(" 动态加载")]),e._v(" "),a("p",[a("code",[e._v("import(/*webpackChunkname: ''video*/, './calc')")])]),e._v(" "),a("p",[a("code",[e._v("output: {")])]),e._v(" "),a("p",[e._v("​\t"),a("code",[e._v("chunkFilename: '[name].min,js'")])]),e._v(" "),a("p",[a("code",[e._v("}")])]),e._v(" "),a("p",[e._v("原理jsonp")]),e._v(" "),a("h3",{attrs:{id:"打包文件分析工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包文件分析工具","aria-hidden":"true"}},[e._v("#")]),e._v(" 打包文件分析工具")]),e._v(" "),a("p",[e._v("entry 有三种写法 字符串,数组,对象")]),e._v(" "),a("p",[a("code",[e._v("entry:{a: \"./src/a.js\", b: './src/b.js'}")])]),e._v(" "),a("p",[a("code",[e._v("output: {filename: [name].js}")])]),e._v(" "),a("p",[e._v("HtmlWebpackPlugin: ({chunks: ['a'], chunksSortMode: 'manual'})")]),e._v(" "),a("p",[e._v("webpack-bundle-analyzer 代码分析插件 .BundleAnalyzerPlugin")]),e._v(" "),a("p",[e._v("new bundleANalyzerPlugin() 生产环境下")]),e._v(" "),a("h3",{attrs:{id:"抽离第三方模块-splitchunks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#抽离第三方模块-splitchunks","aria-hidden":"true"}},[e._v("#")]),e._v(" 抽离第三方模块 splitchunks")]),e._v(" "),a("ul",[a("li",[e._v("不要和业务放到一起")]),e._v(" "),a("li",[e._v("添加缓存")])]),e._v(" "),a("p",[e._v("生产环境下 将第三方模块进行抽离")]),e._v(" "),a("p",[e._v("官网查配置")]),e._v(" "),a("p",[a("code",[e._v("optimization: {splitChunks: []}")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/webpack_optimazation.png",alt:"optimazation"}})]),e._v(" "),a("h4",{attrs:{id:"dllplugin-不要和splitchunks-一起使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dllplugin-不要和splitchunks-一起使用","aria-hidden":"true"}},[e._v("#")]),e._v(" dllplugin 不要和splitchunks 一起使用")]),e._v(" "),a("ul",[a("li",[e._v("splitchunks 构建之时抽离出来")]),e._v(" "),a("li",[e._v("dll plugin 构建之前抽出来")])]),e._v(" "),a("h4",{attrs:{id:"speed-measure"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#speed-measure","aria-hidden":"true"}},[e._v("#")]),e._v(" Speed measure")]),e._v(" "),a("p",[a("code",[e._v("const smw = new SpeedMeasureWebpackPlugin();")])]),e._v(" "),a("p",[a("code",[e._v("module.exports = env => {")])]),e._v(" "),a("p",[a("code",[e._v("return smw.wrap({})")])]),e._v(" "),a("p",[a("code",[e._v("}")])])])}),[],!1,null,null,null);v.default=t.exports}}]);